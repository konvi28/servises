<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Тест Firebase</title>
</head>
<body>
    <h1>Тест підключення Firebase</h1>
    <div id="status">Перевірка...</div>
    <button onclick="testWrite()">Тестувати запис</button>
    <button onclick="testRead()">Тестувати читання</button>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getDatabase, ref, push, set, get } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyD5AKIKSZ3NxIrEKwED2kV_XjzqOVA-YSQ",
            authDomain: "olegkras-cdae7.firebaseapp.com",
            databaseURL: "https://olegkras-cdae7-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "olegkras-cdae7",
            storageBucket: "olegkras-cdae7.firebasestorage.app",
            messagingSenderId: "646414909306",
            appId: "1:646414909306:web:7ec7dce1d0f7b9ac90a7bc"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        
        document.getElementById('status').textContent = '✅ Firebase ініціалізовано';
        console.log('Firebase app:', app);
        console.log('Database:', db);

        window.testWrite = async function() {
            try {
                const testRef = push(ref(db, 'posts'));
                await set(testRef, {
                    title: 'Тестовий пост ' + Date.now(),
                    content: 'Це тестовий пост для перевірки',
                    category: 'poetry',
                    date: new Date().toLocaleDateString('uk-UA'),
                    hashtags: ['#тест'],
                    timestamp: Date.now()
                });
                alert('✅ Успішно записано!');
                console.log('Успішно записано');
            } catch (error) {
                alert('❌ Помилка: ' + error.message);
                console.error('Помилка запису:', error);
            }
        };

        window.testRead = async function() {
            try {
                const postsRef = ref(db, 'posts');
                const snapshot = await get(postsRef);
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    const count = Object.keys(data).length;
                    alert(`✅ Знайдено ${count} постів`);
                    console.log('Пости:', data);
                } else {
                    alert('⚠️ Постів ще немає');
                }
            } catch (error) {
                alert('❌ Помилка: ' + error.message);
                console.error('Помилка читання:', error);
            }
        };
    </script>
</body>
</html>
